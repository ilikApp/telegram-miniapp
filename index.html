<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Gl√ºcksrad</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <h1>üé° Gl√ºcksrad</h1>

  <p id="username"></p>
  <p id="points"></p>

  <button id="spin">Rad drehen</button>

  <div id="questionBox" style="display:none;">
    <p id="questionText"></p>
    <button onclick="answer(0)">Antwort A</button>
    <button onclick="answer(1)">Antwort B</button>
    <button onclick="answer(2)">Antwort C</button>
  </div>

  <p id="result"></p>

  <script>
    const tg = Telegram.WebApp;
    tg.ready();

    const user = tg.initDataUnsafe.user || { username: "Gast" };
    let points = 50;
    let currentQuestion = null;

    const questions = [
      {
        q: "Was ist die Hauptstadt von Frankreich?",
        a: ["Berlin", "Paris", "Rom"],
        correct: 1
      },
      {
        q: "2 + 2 = ?",
        a: ["3", "4", "5"],
        correct: 1
      },
      {
        q: "Welche Farbe hat der Himmel?",
        a: ["Blau", "Gr√ºn", "Rot"],
        correct: 0
      }
    ];

    function update() {
      document.getElementById("username").innerText = "Benutzer: " + user.username;
      document.getElementById("points").innerText = "Punkte: " + points;
    }

    update();

    document.getElementById("spin").onclick = () => {
      document.getElementById("result").innerText = "";
      document.getElementById("questionBox").style.display = "none";

      const r = Math.random();

      if (r < 0.4) {
        points += 10;
        document.getElementById("result").innerText = "‚ûï 10 Punkte erhalten";
      } 
      else if (r < 0.7) {
        currentQuestion = questions[Math.floor(Math.random() * questions.length)];
        document.getElementById("questionText").innerText = currentQuestion.q;
        document.querySelectorAll("#questionBox button").forEach((btn, i) => {
          btn.innerText = currentQuestion.a[i];
        });
        document.getElementById("questionBox").style.display = "block";
      } 
      else {
        document.getElementById("result").innerText = "üé≤ Risiko kommt im n√§chsten Schritt";
      }

      update();
    };

    function answer(index) {
      if (!currentQuestion) return;

      if (index === currentQuestion.correct) {
        points += 5;
        document.getElementById("result").innerText = "‚úÖ Richtig! +5 Punkte";
      } else {
        document.getElementById("result").innerText = "‚ùå Falsch!";
      }

      currentQuestion = null;
      document.getElementById("questionBox").style.display = "none";
      update();
    }
  </script>
</body>
</html>
